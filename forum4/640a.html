<html xmlns:my="http://www.w3.org/2005/Atom" xmlns:gd="http://schemas.google.com/g/2005">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link type="text/css" rel="stylesheet" href="../css/program-think.css">
</head>
<body>
<h1>Comments on 编程随想的博客: C/C++ 中一个简单的 enum 手法（idiom）</h1>
<p><strong><font color="red">updated </font></strong>2013-01-20T22:39:25.694+08:00<br><strong><font color="red">content </font></strong>换个名称就好了，这个解决方法蛮好的，enum适用于做标签<br><strong><font color="red">author </font></strong>limian<br><strong><font color="red">uri </font></strong>html<br><strong><font color="red">avatar </font></strong>http://img1.blogblog.com/img/b16-rounded.gif</p>
<p><strong><font color="red">updated </font></strong>2013-01-20T22:36:17.497+08:00<br><strong><font color="red">content </font></strong>此评论已被作者删除。<br><strong><font color="red">author </font></strong>limian<br><strong><font color="red">uri </font></strong>html<br><strong><font color="red">avatar </font></strong>http://img1.blogblog.com/img/b16-rounded.gif</p>
<p><strong><font color="red">updated </font></strong>2009-04-24T17:29:00.000+08:00<br><strong><font color="red">content </font></strong>好囧哦 enum里面的元素名只能是唯一的标识~  请楼主原谅这些小白贴<br><strong><font color="red">author </font></strong>Anonymous<br><strong><font color="red">uri </font></strong>html<br><strong><font color="red">avatar </font></strong>http://img1.blogblog.com/img/blank.gif</p>
<p><strong><font color="red">updated </font></strong>2009-04-24T17:18:00.000+08:00<br><strong><font color="red">content </font></strong>直接把PROTO_NUM 改成size或者length 比较通用的长度表示就行了 应该不会有什么误解了&lt;br /&gt;十分感谢楼主分享~<br><strong><font color="red">author </font></strong>Anonymous<br><strong><font color="red">uri </font></strong>html<br><strong><font color="red">avatar </font></strong>http://img1.blogblog.com/img/blank.gif</p>
<p><strong><font color="red">updated </font></strong>2009-04-24T17:10:00.000+08:00<br><strong><font color="red">content </font></strong>の 还是不对 不好意思<br><strong><font color="red">author </font></strong>Anonymous<br><strong><font color="red">uri </font></strong>html<br><strong><font color="red">avatar </font></strong>http://img1.blogblog.com/img/blank.gif</p>
<p><strong><font color="red">updated </font></strong>2009-04-24T17:09:00.000+08:00<br><strong><font color="red">content </font></strong>喔~  :-) &lt;br /&gt;那改成这样&lt;br /&gt;enum PROTO{ PROTO_HTTP, PROTO_FTP, PROTO_SMTP, PROTO_SSH};&lt;br /&gt;&lt;br /&gt;int nCntProto[sizeof(PROTO)];<br><strong><font color="red">author </font></strong>Anonymous<br><strong><font color="red">uri </font></strong>html<br><strong><font color="red">avatar </font></strong>http://img1.blogblog.com/img/blank.gif</p>
<p><strong><font color="red">updated </font></strong>2009-04-24T16:46:00.000+08:00<br><strong><font color="red">content </font></strong>楼上的同学，“编译器如何处理enum”这个话题貌似太底层了，关心的人不多。<br><strong><font color="red">author </font></strong>编程随想<br><strong><font color="red">uri </font></strong>html<br><strong><font color="red">avatar </font></strong>http://4.bp.blogspot.com/_itipB8vBZzQ/SY1isusKAfI/AAAAAAAAAGo/4YF360m0Yto/S220/Thinker_BlogSpot.jpg</p>
<p><strong><font color="red">updated </font></strong>2009-04-24T15:40:00.000+08:00<br><strong><font color="red">content </font></strong>其实我的意思是系统是怎么处理 enum，编译器是怎么样处理的<br><strong><font color="red">author </font></strong>vvtone<br><strong><font color="red">uri </font></strong>html<br><strong><font color="red">avatar </font></strong>http://img1.blogblog.com/img/blank.gif</p>
<p><strong><font color="red">updated </font></strong>2009-04-24T15:29:00.000+08:00<br><strong><font color="red">content </font></strong>楼上同学所说的“ENUM的原理”是指啥？<br><strong><font color="red">author </font></strong>编程随想<br><strong><font color="red">uri </font></strong>html<br><strong><font color="red">avatar </font></strong>http://4.bp.blogspot.com/_itipB8vBZzQ/SY1isusKAfI/AAAAAAAAAGo/4YF360m0Yto/S220/Thinker_BlogSpot.jpg</p>
<p><strong><font color="red">updated </font></strong>2009-04-24T14:07:00.000+08:00<br><strong><font color="red">content </font></strong>对，他的数值是1，不是整个的长度，但是这个好像是由编译器来决定的。另外是否可以扩充一下，ENUM的原理呢？知其所以然，才可以呀，另外就是要和系统，编译器，操作系统关联最好了<br><strong><font color="red">author </font></strong>vvtone<br><strong><font color="red">uri </font></strong>html<br><strong><font color="red">avatar </font></strong>http://img1.blogblog.com/img/blank.gif</p>
<p><strong><font color="red">updated </font></strong>2009-04-24T12:43:00.000+08:00<br><strong><font color="red">content </font></strong>楼上的同学，sizeof(PROTO)不是你所期望的效果。<br><strong><font color="red">author </font></strong>编程随想<br><strong><font color="red">uri </font></strong>html<br><strong><font color="red">avatar </font></strong>http://4.bp.blogspot.com/_itipB8vBZzQ/SY1isusKAfI/AAAAAAAAAGo/4YF360m0Yto/S220/Thinker_BlogSpot.jpg</p>
<p><strong><font color="red">updated </font></strong>2009-04-24T09:28:00.000+08:00<br><strong><font color="red">content </font></strong>:) 我觉得可不可以这样呢？&lt;br /&gt;enum PROTO{  PROTO_HTTP,  PROTO_FTP,  PROTO_SMTP,  PROTO_SSH};&lt;br /&gt;&lt;br /&gt;int nCntProto[sizeof(PROTO)/sizeof(PROTO_HTTP)];&lt;br /&gt;&lt;br /&gt;呵呵 不过 没有这样写过 不知道可不可行<br><strong><font color="red">author </font></strong>Anonymous<br><strong><font color="red">uri </font></strong>html<br><strong><font color="red">avatar </font></strong>http://img1.blogblog.com/img/blank.gif</p>
<p><strong><font color="red">updated </font></strong>2009-04-24T08:51:00.000+08:00<br><strong><font color="red">content </font></strong>哦，算错了，加上PROTO_NUM ，正好是4个，这个虽然是个很好的技巧，但是在也算有个小的问题，就是一般定义ENUM的时候，其他人的理解应该表示某个状态或者数值，但是这个PROTO_NUM却表示其他的意思，感觉有些不挨边的，不过任何事情没有完美的，也算是挺好的创意了。致敬。<br><strong><font color="red">author </font></strong>vvtone<br><strong><font color="red">uri </font></strong>html<br><strong><font color="red">avatar </font></strong>http://img1.blogblog.com/img/blank.gif</p>
<p><strong><font color="red">updated </font></strong>2009-04-23T16:24:00.000+08:00<br><strong><font color="red">content </font></strong>楼上的同学，默认情况下（不设定初始值），枚举值从0开始依次递增。<br><strong><font color="red">author </font></strong>编程随想<br><strong><font color="red">uri </font></strong>html<br><strong><font color="red">avatar </font></strong>http://4.bp.blogspot.com/_itipB8vBZzQ/SY1isusKAfI/AAAAAAAAAGo/4YF360m0Yto/S220/Thinker_BlogSpot.jpg</p>
<p><strong><font color="red">updated </font></strong>2009-04-23T16:14:00.000+08:00<br><strong><font color="red">content </font></strong>另外还需要定义初始值吧，如PROTO_HTTP=1，另外就是各个枚举的数值必须是连续的，才可以<br><strong><font color="red">author </font></strong>vvtone<br><strong><font color="red">uri </font></strong>html<br><strong><font color="red">avatar </font></strong>http://img1.blogblog.com/img/blank.gif</p>
<p><strong><font color="red">updated </font></strong>2009-04-21T19:30:00.000+08:00<br><strong><font color="red">content </font></strong>C++ 应该这样用才好:&lt;br /&gt;tr1::array&amp;lt;size_t, PROTO_NUM&amp;gt; ar = { ... };&lt;br /&gt;这样既有C的效率， 又有边界检查。&lt;br /&gt;而且size_t比int有更好的移植性。<br><strong><font color="red">author </font></strong>Anonymous<br><strong><font color="red">uri </font></strong>html<br><strong><font color="red">avatar </font></strong>http://img1.blogblog.com/img/blank.gif</p>
<p><strong><font color="red">updated </font></strong>2009-04-20T09:48:00.000+08:00<br><strong><font color="red">content </font></strong>非常感谢楼上同学的认真仔细 :)<br><strong><font color="red">author </font></strong>编程随想<br><strong><font color="red">uri </font></strong>html<br><strong><font color="red">avatar </font></strong>http://4.bp.blogspot.com/_itipB8vBZzQ/SY1isusKAfI/AAAAAAAAAGo/4YF360m0Yto/S220/Thinker_BlogSpot.jpg</p>
<p><strong><font color="red">updated </font></strong>2009-04-20T07:55:00.000+08:00<br><strong><font color="red">content </font></strong>版本2：下面&lt;br /&gt;"第4个是SSH"应该为"第3个是SSH"<br><strong><font color="red">author </font></strong>Anonymous<br><strong><font color="red">uri </font></strong>html<br><strong><font color="red">avatar </font></strong>http://img1.blogblog.com/img/blank.gif</p>
<p><strong><font color="red">updated </font></strong>2009-04-19T19:50:00.000+08:00<br><strong><font color="red">content </font></strong>1楼的同学，&lt;br /&gt;如果另外定义PROTO_NUM常量，代码会有冗余。一旦协议类型有变化但又忘记调整PROTO_NUM的值，无形中就引入了Bug。&lt;br /&gt;不过PROTO_NUM确实和其它枚举常量的类型不一致，这算是美中不足 :(<br><strong><font color="red">author </font></strong>编程随想<br><strong><font color="red">uri </font></strong>html<br><strong><font color="red">avatar </font></strong>http://4.bp.blogspot.com/_itipB8vBZzQ/SY1isusKAfI/AAAAAAAAAGo/4YF360m0Yto/S220/Thinker_BlogSpot.jpg</p>
<p><strong><font color="red">updated </font></strong>2009-04-19T19:02:00.000+08:00<br><strong><font color="red">content </font></strong>用枚举的好处是，编译器会帮你数出到底有多少个协议，这样就能自动确保一致性。<br><strong><font color="red">author </font></strong>Anonymous<br><strong><font color="red">uri </font></strong>html<br><strong><font color="red">avatar </font></strong>http://img1.blogblog.com/img/blank.gif</p>
<p><strong><font color="red">updated </font></strong>2009-04-19T11:40:00.000+08:00<br><strong><font color="red">content </font></strong>代码中出现很多magic number固然不好，但版本4的trick也未必全是优点。为了不引起误解，enum里应该放相同“类型”的元素，前面4个都是协议类型，突然冒出一个PROTO_NUM算什么事？&lt;br /&gt;紧跟着enum后声明#define PROTO_NUM 4不就很清晰吗？这里的4并不算是magic number，因为不妨碍理解。<br><strong><font color="red">author </font></strong>Anonymous<br><strong><font color="red">uri </font></strong>html<br><strong><font color="red">avatar </font></strong>http://img1.blogblog.com/img/blank.gif</p>
</body>
</html>
